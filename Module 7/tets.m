% f = @(z,x1,x2) (-z + (x1*sin(x2) + 1/2)^2 + (x1*sin((3*x2)/2) + 3/2)^2 + (x1*sin((3*x2)/10) - 1/5)^2 + (x1*sin((11*x2)/10) + 4/5)^2 + (x1*sin((14*x2)/5) + 9/5)^2 + (x1*sin((13*x2)/10) + 8/5)^2 + (x1*sin((19*x2)/5) + 17/10)^2 + (x1*sin((29*x2)/10) + 9/5)^2 + (x1*sin((47*x2)/10) + 8/5)^2 + (x1*sin((47*x2)/10) + 17/10)^2);
% fimplicit3(f)

syms k1 k2;
a_1 = [-4.7, -2.9, -1.3, -1, -.3, 1.1, 1.5, 2.8, 3.8, 4.7];
b_1 = [1.6, 1.8, 1.6, .5, -.2, -.8, -1.5, -1.8, -1.7, -1.7];
g_1 = [];
v = [k1 k2];
for i = 1:10
    g_1 = [g_1 ; (k1*sin(a_1(i)*k2)-b_1(i))^2];
end
J = jacobian(g_1,v)
hessian = 2*transpose(J)*J